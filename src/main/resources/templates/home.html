<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>

    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Gaël YVRARD" />

    <!-- Title -->
    <title>Mes photos</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- MetisMenu CSS -->
    <link href="vendor/metisMenu/metisMenu.min.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link href="dist/css/sb-admin-2.css" rel="stylesheet" />

    <!-- Morris Charts CSS -->
    <link href="vendor/morrisjs/morris.css" rel="stylesheet" />

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

    <!-- image gallery pure css -->
    <link href="gallery/flexbin.css" rel="stylesheet" type="text/css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body>

    <div id="wrapper">


        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" th:href="@{/}" >Gallerie photos</a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">

                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">

                        <!-- administration -->
                        <li sec:authorize="hasRole('ROLE_ADMIN')">
                            <a th:href="@{/indexation}"><i class="fa fa-gear fa-fw"></i> Administration</a>
                        </li>

                        <li class="divider"></li>

                        <!-- déconnexion -->
                        <li>
                            <form name="logout" th:action="@{/logout}" method="post" />
                            <a href="#" onclick="Logout()" ><i class="fa fa-sign-out fa-fw"></i> Déconnexion</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">

                        <!-- search side bar -->
                        <li class="sidebar-search">
                            <form name="search" th:action="@{/searchByText}" method="post" class="form-inline mt-2 mt-md-0">
                                <div class="input-group custom-search-form">
                                    <input name="text" type="text" th:value="${text}" class="form-control" placeholder="Rechercher..." />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" type="submit">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </form>
                            <!-- /input-group -->
                        </li>

                        <!-- faces facet-->
                        <li>
                            <a href="#"><i class="fa fa-user fa-fw"></i> <baliseTexteNormal th:text="${photoList.faces.name}" /><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li th:each="face: ${photoList.faces.facetEntries}" >
                                    <a th:href="@{/filterByFacetValue(type=${faceFacetSearchType},selectedFacetValue=${face.key},action=select)}" th:text="${face.key} + ' (' + ${face.value} + ')'" />
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>

                        <!-- dates facets -->
                        <li>
                            <a href="#"><i class="fa fa-th fa-fw"></i> <baliseTexteNormal th:text="${photoList.dates.name}" /><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li th:each="year: ${photoList.dates.facetEntries}">
                                    <a th:href="@{/filterByFacetValue(type=${yearFacetSearchType},selectedFacetValue=${year.title},action=select)}" th:text="${year.title} + ' (' + ${year.count} + ')'" />
                                    <ul class="nav nav-third-level">
                                        <li th:each="month: ${year.entry}">
                                            <a th:href="@{/filterByFacetValue(type=${monthFacetSearchType},selectedFacetValue=${year.title+'_'+month.key},action=select)}" th:text="${month.key} + ' (' + ${month.value} + ')'" />
                                        </li>
                                    </ul>
                                    <!-- /.nav-third-level -->
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">

            <!-- image list part -->
            <div class="row">

                <!-- informative message : result count vs results displayed -->
                <div align="right">
                    <h6 th:text="${photoList.resultCount+' résultats'}"/>
                </div>

                <!-- applied filters -->
                <span th:if="${!searchParametersSession.selectedFacetValues.isEmpty()}" th:each="selectedFacet: ${searchParametersSession.selectedFacetValues}">
                    <span th:each="selectedFacetValue: ${selectedFacet.value}" >
                        <a class="badge badge-primary" th:href="@{/filterByFacetValue(type=${selectedFacet.key},selectedFacetValue=${selectedFacetValue},action=unselect)}">
                            <i class="fa fa-times fa-fw"></i><baliseTexteNormal th:text="${selectedFacetValue}" />
                        </a>
                    </span>
                </span>

                <!-- image list -->
                <section class="row text-center placeholders">

                    <div class="flexbin flexbin-margin" >
                        <a th:each="photo,iterationstatus :${photoList.photos}" th:href="${photo.url}">
                            <img th:alt="${photo.name}" th:src="${photo.thbUrl}"/>
                        </a>
                    </div>
                </section>

                <!-- pagination -->
                <nav>
                    <div align="center">
                        <ul class="pagination">

                            <!-- previous button -->
                            <li class="page-item" th:if="${searchParametersSession.activePage &gt; 1}">
                                <a class="page-link" th:href="@{/switchPage(action=previous)}" >Précédent</a>
                            </li>

                            <!-- page buttons -->
                            <li th:if="${photoList.pages.size() &gt; 1 and photoList.pages.size() &lt; 10}" th:each="pageNum: ${photoList.pages}" class="page-item">
                                <a class="page-link" th:href="@{/switchPage(pageNumber=${pageNum})}" th:text="${pageNum}" />
                            </li>

                            <!-- next button -->
                            <li class="page-item" th:if="${searchParametersSession.activePage &lt; photoList.pages.size()}">
                                <a class="page-link" th:href="@{/switchPage(action=next)}" >Suivant</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>

        </div>
        <!-- /#page-wrapper -->
    </div>
    <!-- /#wrapper -->

    <!-- Placed at the end of the document so the pages load faster -->
    <script language="javascript">
        function Logout()
        {
            document.logout.submit();
        }
    </script>

    <!-- jQuery -->
    <script src="vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript (used to display facets in vertical menu) -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript (used to display facets in vertical menu) -->
    <script src="../dist/js/sb-admin-2.js"></script>

</body>
</html>